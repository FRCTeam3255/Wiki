<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Tayler Uva" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>MotionMagic Lesson Guide - SN Wiki</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "MotionMagic Lesson Guide";
        var mkdocs_page_input_path = "Lessons (Software)/MotionMagic.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../.images/SN White Text Logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../.." >SuperNURDs Internal Wiki</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Build Season</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Day%200%20-%20Mock%20Kickoff/" >Day 0: Mock Kickoff</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Day%201%20-%20Kick%20Off/" >Day 1: Kick Off</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Day%201.1%20-%20Game%20Manual%20Breakdown/" >Day 1.1: Game Manual Breakdown</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Day%201.2%20-%20Scoring%20Method%20Analysis/" >Day 1.2: Scoring Method Analysis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Day%201.3%20-%20Feature%20Importance%20List/" >Day 1.3: Feature Importance List</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Day%202-4%20-%20Robot%20Architecture%20Phase/" >Day 2 thru 4: Robot Architecture Phase</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Day%202-4.1%20-%20Archetype%20Creation/" >Archetype Creation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Digital%20Folder%20Checklist/" >Digital Folder Checklist</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Team%20Photo/" >Team Photo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Build%20Season/Weekly%20Schedule/" >Weekly Schedule</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Competition</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Comp%20Day/" >Comp Day</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Comp%20Logistics/" >Comp Logistics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Drive%20Tryouts/" >Drive Tryouts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Impact%20Judges%27%20Questions/" >Impact Judges' Questions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Post%20Comp%20Cleanup/" >Post Comp Cleanup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Pre%20Comp%20Prep/" >Pre Comp Prep</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Regional%20Reflection/" >Regional Reflection</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Role%20Definitions/" >Competition Roles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Competition/Running%20Stats/" >Reference for Running Stats at Competition</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Electrical</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Electrical/Breaker%20Wiring/" >Breaker Wiring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Electrical/Component%20Mounting/" >Component Mounting</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Electrical/Pre-Boot%20Checklist/" >Pre/First-Boot Checklist</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Electrical/Ring%20Terminal%20Crimping/" >Crimping Instructions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Electrical/Selecting%20a%20Battery/" >Selecting a Battery</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Electrical/Wiring%20Cheat%20Sheet/" >Wiring Cheat Sheet</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Electrical/Wiring%20LED/" >Wiring LEDs</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Fabrication</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Fabrication/Assembly%20Standard/" >Assembly Standard</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Fabrication/Bumpers/" >Bumper Construction</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">General</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../General/Computer%20Programs/" >Computer Programs Used</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../General/How%20to%20Update%20the%20Wiki/" >How to Update the Wiki</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../General/Robot%20Categories/" >Robot Categories</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../General/Standard%203D%20Prints/" >Standard 3D Prints</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../General/Standard%20Purchases/" >Standard Purchases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../General/Team%20Expectations/" >Team Expectations</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">GitHub</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../GitHub/Downloading%20Projects/" >Downloading GitHub Projects</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lessons (Software)</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#" >MotionMagic Lesson Guide</a> <ul class="current" >
    <li class="toctree-l2"><a class="reference internal" href="#how-do-you-normally-run-a-motor-set-percent-output-power">How Do You Normally Run a Motor? (.set Percent Output (Power))</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#what-is-motionmagic">What Is MotionMagic?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#what-is-pid-control">What Is PID Control?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-does-motionmagic-work">How Does MotionMagic Work?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#output-control-set-vs-setcontrol">Output Control: .set vs .setControl</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#power-control-setvalue-percent-output">Power Control - .set(value) - Percent Output</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#position-pid-setcontrolrequest-motionmagicexpo">Position PID - .setControl(request) — MotionMagicExpo</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#position-pid-configuring-mechanism-settings">Position PID - Configuring Mechanism Settings</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#velocity-pid-setcontrolrequest-motionmagicvelocity">Velocity PID - .setControl(request) — MotionMagicVelocity</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#velocity-pid-configure-mechanism-settings">Velocity PID - Configure Mechanism Settings</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#more-resources">More Resources</a>
    </li>
  </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../StateMachine/" >State Machine Lesson</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mechanical</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Mechanical/Bolt%20to%20Tool%20Lookup/" >Bolt to Tool Lookup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Mechanical/Motor%20Specs/" >Motor Specifications</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Media and Comms</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Media%20and%20Comms/Graphic%20Design/" >Graphic Design</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Media%20and%20Comms/Video%20Editing/" >Video Editing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Media%20and%20Comms/Website/" >Website</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Software</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Configuring%20the%20Radio/" >Configuring the Radio</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Conventions/" >Naming Conventions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Creating%20Pull%20Requests/" >Creating Pull Requests (PRs)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Creating%20new%20Robot%20Project/" >Creating new Robot Project</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Flashing%20RIO%202/" >Flashing RIO 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/GitHub%20Standards/" >GitHub Standards</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Reverting%20a%20File/" >Reverting a File to Main Branch Version</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Setting%20Up%20Driverstation/" >Setting Up Driverstation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Software%20Errors%20and%20Fixes/" >Software Errors and Fixes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Swoffsets/" >Swoffsets (Swerve Offsets)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/TalonFX%20Blink%20Codes/" >TalonFX Blink Codes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Tuning%20Auto%20PID/" >Tuning Auto PID</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Tuning%20Motion%20Magic%20PID/" >Tuning Motion Magic PID</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/UpdateCAD/" >Step-by-Step Guide to Update CAD for Simulation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Updating%20Limelight%20Firmware/" >Updating Limelight Firmware</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Updating%20WPILib%20Project%20Version/" >Updating WPILib Project Version</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/Vendor%20Libraries/" >Vendor Libraries</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Software/WPILib%20Install/" >WPILib Installation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Stats</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Stats/App%20Setup/" >App Setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Stats/Training/" >Training</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../Stats/War%20Room/" >War Room</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Test Folder</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../Test%20Folder/Test%20File/" >This is a test page</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">SN Wiki</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Lessons (Software)</li>
      <li class="breadcrumb-item active">MotionMagic Lesson Guide</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/FRCTeam3255/Wiki/edit/main/Lessons (Software)/MotionMagic.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="motionmagic-lesson-guide">MotionMagic Lesson Guide</h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p><code>motorName</code> and its capitalization variations (e.g., <code>MOTOR_NAME_CONFIG</code>, <code>MotorName</code>) are placeholders. Replace them with your actual motor name throughout the code examples.</p>
</div>
<h2 id="how-do-you-normally-run-a-motor-set-percent-output-power">How Do You Normally Run a Motor? (<code>.set</code> Percent Output (Power))</h2>
<p>Most robot programmers start by running motors with a simple command:</p>
<pre class="highlight"><code class="language-java">// Run motor at 50% forward power
motorName.set(0.5);</code></pre>
<ul>
<li>This sets the motor output as a percentage of full power (from -1.0 to 1.0).</li>
<li>It's open-loop: the motor just runs at the power you ask, with no feedback or position control.</li>
<li>Good for simple tasks, but not precise—motors can overshoot, stall, or drift.</li>
</ul>
<hr />
<h2 id="what-is-motionmagic">What Is MotionMagic?</h2>
<p>MotionMagic is a special feature for controlling motors, made by CTRE for their Talon SRX and Talon FX motor controllers. It helps you move parts of your robot (like arms or elevators) smoothly and precisely to a target position, without needing to write complicated code.</p>
<h2 id="what-is-pid-control">What Is PID Control?</h2>
<p>Before MotionMagic, people used something called "PID control" to make motors stop at the right spot. PID stands for:</p>
<ul>
<li><strong>P</strong>roportional: How far you are from the target.</li>
<li><strong>I</strong>ntegral: How long you've been away from the target.</li>
<li><strong>D</strong>erivative: How quickly you're approaching the target.</li>
</ul>
<p>PID helps motors reach and hold a position, but tuning it can be tricky. MotionMagic uses PID behind the scenes, so you don’t need to understand all the math—it does the hard work for you!</p>
<h2 id="how-does-motionmagic-work">How Does MotionMagic Work?</h2>
<p>MotionMagic creates a plan for your motor to follow, called a "motion profile." It decides how fast to go and how quickly to speed up or slow down, so your robot part moves smoothly to the target position.</p>
<p><img alt="" src="https://v6.docs.ctr-electronics.com/en/latest/_images/trapezoidal-profile.png" /></p>
<h2 id="output-control-set-vs-setcontrol">Output Control: <code>.set</code> vs <code>.setControl</code></h2>
<p>Understanding how you command a motor is essential for using MotionMagic effectively. TalonFX motor controllers support two main ways to control output:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>What It Does</th>
<th>Typical Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.set(value)</code></td>
<td>Sets percent output (-1.0 to 1.0, or -100% to 100%)</td>
<td>Simple open-loop power control</td>
</tr>
<tr>
<td><code>.setControl(request)</code></td>
<td>Uses advanced control modes (MotionMagic)</td>
<td>Precise position or velocity</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="power-control-setvalue-percent-output">Power Control - <code>.set(value)</code> - Percent Output</h2>
<p>This is the most basic way to run a motor. You give it a value between -1.0 and 1.0, and the motor runs at that percentage of full power. This does <strong>not</strong> use any feedback or closed-loop control.</p>
<pre class="highlight"><code class="language-java">// Define the function in the Motion subsystem 
public void setMotorNamePower(double power) {
  motorName.set(power);
}</code></pre>
<pre class="highlight"><code class="language-java">// Usage example of Percent Output
double power = 0.5;  // This would be stored in constants
motionInstance.setMotorNamePower(power);  // This would be called in the state</code></pre>
<ul>
<li><strong>Pros:</strong> Simple, direct, good for testing.</li>
<li><strong>Cons:</strong> No position or power control, can overshoot or stall.</li>
</ul>
<hr />
<h2 id="position-pid-setcontrolrequest-motionmagicexpo">Position PID - <code>.setControl(request)</code> — MotionMagicExpo</h2>
<p>This method lets you use features like MotionMagic, PID, or velocity control. You create a control request object (such as <code>MotionMagicExpoVoltage</code> or <code>MotionMagicVelocityVoltage</code>) that tells the motor controller exactly how to move, including target position or velocity, acceleration, and which PID slot to use.</p>
<pre class="highlight"><code class="language-java">// Define the function in Motion Subsystem
MotionMagicExpoVoltage motorNamePositionRequest = new MotionMagicExpoVoltage(0); // Create object at top of file and reuse

public void setMotorNameAngle(Angle targetAngle) {
  motorName.setControl(motorNamePositionRequest.withPosition(targetAngle));
}</code></pre>
<pre class="highlight"><code class="language-java">// Usage example of angles as Degrees units
Angle targetAngle = Degrees.of(65.15);  // This would be stored in constants
motionInstance.seMotorNameAngle(targetAngle);  // This would be called in the state</code></pre>
<ul>
<li><strong>Pros:</strong> Precise, smooth, uses feedback sensors, supports profiles.</li>
<li><strong>Cons:</strong> Requires configuration and understanding of control modes.</li>
</ul>
<h2 id="position-pid-configuring-mechanism-settings">Position PID - Configuring Mechanism Settings</h2>
<p>Before using MotionMagicExpo, configure your mechanism's TalonFX with the correct position-control settings. This includes PID values, sensor-to-mechanism ratio, and gravity compensation type.</p>
<ul>
<li><strong>PID values</strong> (<code>kP</code>, <code>kI</code>, <code>kD</code>, <code>kS</code>, <code>kG</code>) control how the motor responds to errors and gravity.</li>
</ul>
<pre class="highlight"><code class="language-java">// --- PID and Feedforward Constants ---
// NOTE: We start by setting all to 0, we will tune these later
// Feedforward
MOTOR_NAME_CONFIG.Slot0.kS = 0;    // Static gain (overcomes friction)
MOTOR_NAME_CONFIG.Slot0.kG = 0;   // Gravity feedforward (helps hold up against gravity)
// PID
MOTOR_NAME_CONFIG.Slot0.kP = 0;    // Proportional gain (how hard to correct position error)</code></pre>
<ul>
<li><strong>GravityType</strong> tells the controller how to compensate for gravity (use <code>Elevator_Static</code> for vertical lifts, <code>Arm_Cosine</code> for rotating arms). <strong>DO DEMO</strong></li>
</ul>
<pre class="highlight"><code class="language-java">// --- Gravity Compensation Type ---
MOTOR_NAME_CONFIG.Slot0.GravityType = GravityTypeValue.Elevator_Static;
// Use Elevator_Static for vertical lifts, Arm_Cosine for rotating arms</code></pre>
<ul>
<li><strong>SensorToMechanismRatio</strong> ensures setpoints and feedback are in real-world units (like inches or degrees). This is what we call "Gear Ratio". We just ask mechanical for this value. Each number represents a gear.</li>
</ul>
<pre class="highlight"><code class="language-java">// --- Sensor Conversion ---
MOTOR_NAME_CONFIG.Feedback.SensorToMechanismRatio = ((12.0 / 60.0) * (26.0 / 52.0));
// MOTOR_NAME_CONFIG.Feedback.SensorToMechanismRatio = ((GEAR_1 / GEAR_2) * (GEAR_3 / GEAR_4));
// Converts motor rotations to mechanism units (e.g., inches of elevator travel)</code></pre>
<pre class="highlight"><code class="language-java">// --- Apply the config to motor like we already do ---
motorName.getConfigurator().apply(constMotion.MOTOR_NAME_CONFIG);</code></pre>
<hr />
<h2 id="velocity-pid-setcontrolrequest-motionmagicvelocity">Velocity PID - <code>.setControl(request)</code> — MotionMagicVelocity</h2>
<p>Use this when you want to hit and maintain a target velocity. Set your targets and limits in WPILib RPM, then convert to the Talon's expected units under the hood. Keep everything in Slot0—no extra slot juggling needed.</p>
<pre class="highlight"><code class="language-java">// Define the function in Rotors Subsystem
MotionMagicVelocityVoltage motorNameVelocityRequest = new MotionMagicVelocityVoltage(0); // Create once and reuse

public void setMotorNameVelocity(AngularVelocity targetVelocity) {
  motorName.setControl(motorNameVelocityRequest.withVelocity(targetVelocity));
}</code></pre>
<pre class="highlight"><code class="language-java">// Usage example
AngularVelocity shooterTargetRMP = RPM.of(4500); // This would be stored in constants
rotorsInstance.setMotorNaVelocity(shooterTargetRpm);  // This would be called in the state</code></pre>
<ul>
<li><strong>Pros:</strong> Precise, smooth, uses feedback sensors, supports profiles.</li>
<li><strong>Cons:</strong> Requires configuration and understanding of control modes.</li>
</ul>
<h2 id="velocity-pid-configure-mechanism-settings">Velocity PID - Configure Mechanism Settings</h2>
<p>Before using MotionMagicVelocity, configure your mechanism's TalonFX with the correct velocity-control settings. This includes PID values, sensor-to-mechanism ratio, and any gravity compensation your mechanism needs. Keep everything in Slot0—no slot switching—and express targets/limits in WPILib <code>Units.RPM</code>, converting to the Talon's units.</p>
<ul>
<li><strong>Slot0 gains</strong> — Velocity feedback (<code>kP</code>, <code>kI</code>, <code>kD</code>) plus feedforward (<code>kS</code>, <code>kV</code>, <code>kA</code>).</li>
<li><strong>Profile limits</strong> — MotionMagic acceleration and jerk, entered in RPM and converted to rotations/sec units.</li>
<li><strong>Gravity compensation</strong> — Optional; set if your velocity mechanism benefits from offsetting gravity.</li>
<li><strong>SensorToMechanismRatio</strong> — Converts motor rotations to mechanism units; keep consistent with your position setup if shared hardware.</li>
</ul>
<pre class="highlight"><code class="language-java">// --- Velocity PID and Feedforward Constants ---
// NOTE: We start by setting all to 0, we will tune these later
// Feedforward
MOTOR_NAME_CONFIG.Slot0.kS = 0;    // Static gain (overcomes friction)
MOTOR_NAME_CONFIG.Slot0.kV = 0;    // Velocity feedforward
MOTOR_NAME_CONFIG.Slot0.kA = 0;    // Acceleration feedforward
// PID (velocity loop)
MOTOR_NAME_CONFIG.Slot0.kP = 0;    // Proportional gain (velocity error)</code></pre>
<pre class="highlight"><code class="language-java">// --- MotionMagic Velocity Limits ---
MOTOR_NAME_CONFIG.MotionMagic.MotionMagicCruiseVelocity = 60;
MOTOR_NAME_CONFIG.MotionMagic.MotionMagicAcceleration = 600;
MOTOR_NAME_CONFIG.MotionMagic.MotionMagicJerk = 6000;</code></pre>
<pre class="highlight"><code class="language-java">// --- Apply the config to motor like we already do ---
motorName.getConfigurator().apply(constMotion.MOTOR_NAME_CONFIG);</code></pre>
<h2 id="more-resources">More Resources</h2>
<ul>
<li><a href="https://docs.ctre-phoenix.com/en/stable/ch13_MotionMagic.html">CTRE MotionMagic Documentation</a></li>
<li><a href="https://github.com/CrossTheRoadElec/Phoenix-Examples-Languages">FRC MotionMagic Examples</a></li>
</ul>
<hr />
<p>This guide is for beginners. You don’t need to know all the math—just follow the steps and experiment!</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../GitHub/Downloading%20Projects/" class="btn btn-neutral float-left" title="Downloading GitHub Projects"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../StateMachine/" class="btn btn-neutral float-right" title="State Machine Lesson">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/FRCTeam3255/Wiki" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../../GitHub/Downloading%20Projects/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../StateMachine/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
